/*****************************************************************************
 @Project    : CET341 Assignment
 @File       : my_mem.c
 @Details    : Memory allocation/de-allocation.
 @Author     : Liang Tang
 @Hardware   : STM32F46 only
 --------------------------------------------------------------------------
 @Revision   :
  Ver      Author       Date             Changes
 --------------------------------------------------------------------------
  1.0     Liang Tang    2019-09-19       Initial Release
******************************************************************************/


#include <Common.h>

/*****************************************************************************
 Define
******************************************************************************/


/*****************************************************************************
 Type definition
******************************************************************************/


/*****************************************************************************
 Global Variables
******************************************************************************/


/*****************************************************************************
 Local Variables
******************************************************************************/


/*****************************************************************************
 Local Functions
******************************************************************************/


/*****************************************************************************
 Implementation
******************************************************************************/
/******************************************************************************
 @Description : Memory allocation
 @param       : MallocSize: memory malloc size
******************************************************************************/
void *pMyMalloc(size_t MallocSize)
{
  void *pMallocAddr;
  /**********************************************
  * For safety purpose, should suspend all tasks
  * running now.
  **********************************************/
  pMallocAddr = malloc(MallocSize);
  /**********************************************
  * For safety purpose, should resume all tasks
  **********************************************/

  return(pMallocAddr);
}


/******************************************************************************
 @Description : Memory de-allocation
 @param       : pMem: the de-allocation memory pointer
******************************************************************************/
void MyFree(void *pMem)
{

  if (NULL!=pMem)
  {
    /**********************************************
    * For safety purpose, should suspend all tasks
    * running now.
    **********************************************/
    free(pMem);
    /**********************************************
    * For safety purpose, should resume all tasks
    **********************************************/

  }
}

